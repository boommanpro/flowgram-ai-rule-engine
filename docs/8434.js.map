{"version":3,"file":"8434.js","sources":["webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/base/common/extpath.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/base/common/mime.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/base/common/resources.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/editor/common/languages/modesRegistry.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/jsonschemas/common/jsonContributionRegistry.js","webpack://@flowgram.ai/demo-free-layout/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/registry/common/platform.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { posix, sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { startsWithIgnoreCase } from './strings.js';\nexport function isPathSeparator(code) {\n    return code === 47 /* CharCode.Slash */ || code === 92 /* CharCode.Backslash */;\n}\n/**\n * Takes a Windows OS path and changes backward slashes to forward slashes.\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\n * Using it on a Linux or MaxOS path might change it.\n */\nexport function toSlashes(osPath) {\n    return osPath.replace(/[\\\\/]/g, posix.sep);\n}\n/**\n * Takes a Windows OS path (using backward or forward slashes) and turns it into a posix path:\n * - turns backward slashes into forward slashes\n * - makes it absolute if it starts with a drive letter\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\n * Using it on a Linux or MaxOS path might change it.\n */\nexport function toPosixPath(osPath) {\n    if (osPath.indexOf('/') === -1) {\n        osPath = toSlashes(osPath);\n    }\n    if (/^[a-zA-Z]:(\\/|$)/.test(osPath)) { // starts with a drive letter\n        osPath = '/' + osPath;\n    }\n    return osPath;\n}\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\nexport function getRoot(path, sep = posix.sep) {\n    if (!path) {\n        return '';\n    }\n    const len = path.length;\n    const firstLetter = path.charCodeAt(0);\n    if (isPathSeparator(firstLetter)) {\n        if (isPathSeparator(path.charCodeAt(1))) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            if (!isPathSeparator(path.charCodeAt(2))) {\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    if (isPathSeparator(path.charCodeAt(pos))) {\n                        break;\n                    }\n                }\n                if (start !== pos && !isPathSeparator(path.charCodeAt(pos + 1))) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        if (isPathSeparator(path.charCodeAt(pos))) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n        // /user/far\n        // ^\n        return sep;\n    }\n    else if (isWindowsDriveLetter(firstLetter)) {\n        // check for windows drive letter c:\\ or c:\n        if (path.charCodeAt(1) === 58 /* CharCode.Colon */) {\n            if (isPathSeparator(path.charCodeAt(2))) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            }\n            else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            if (isPathSeparator(path.charCodeAt(pos))) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n    return '';\n}\n/**\n * @deprecated please use `IUriIdentityService.extUri.isEqualOrParent` instead. If\n * you are in a context without services, consider to pass down the `extUri` from the\n * outside, or use `extUriBiasedIgnorePathCase` if you know what you are doing.\n */\nexport function isEqualOrParent(base, parentCandidate, ignoreCase, separator = sep) {\n    if (base === parentCandidate) {\n        return true;\n    }\n    if (!base || !parentCandidate) {\n        return false;\n    }\n    if (parentCandidate.length > base.length) {\n        return false;\n    }\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(base, parentCandidate);\n        if (!beginsWith) {\n            return false;\n        }\n        if (parentCandidate.length === base.length) {\n            return true; // same path, different casing\n        }\n        let sepOffset = parentCandidate.length;\n        if (parentCandidate.charAt(parentCandidate.length - 1) === separator) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n        return base.charAt(sepOffset) === separator;\n    }\n    if (parentCandidate.charAt(parentCandidate.length - 1) !== separator) {\n        parentCandidate += separator;\n    }\n    return base.indexOf(parentCandidate) === 0;\n}\nexport function isWindowsDriveLetter(char0) {\n    return char0 >= 65 /* CharCode.A */ && char0 <= 90 /* CharCode.Z */ || char0 >= 97 /* CharCode.a */ && char0 <= 122 /* CharCode.z */;\n}\nexport function hasDriveLetter(path, isWindowsOS = isWindows) {\n    if (isWindowsOS) {\n        return isWindowsDriveLetter(path.charCodeAt(0)) && path.charCodeAt(1) === 58 /* CharCode.Colon */;\n    }\n    return false;\n}\n","export const Mimes = Object.freeze({\n    text: 'text/plain',\n    binary: 'application/octet-stream',\n    unknown: 'application/unknown',\n    markdown: 'text/markdown',\n    latex: 'text/latex',\n    uriList: 'text/uri-list',\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as extpath from './extpath.js';\nimport { Schemas } from './network.js';\nimport * as paths from './path.js';\nimport { isLinux, isWindows } from './platform.js';\nimport { compare as strCompare, equalsIgnoreCase } from './strings.js';\nimport { URI, uriToFsPath } from './uri.js';\nexport function originalFSPath(uri) {\n    return uriToFsPath(uri, true);\n}\nexport class ExtUri {\n    constructor(_ignorePathCasing) {\n        this._ignorePathCasing = _ignorePathCasing;\n    }\n    compare(uri1, uri2, ignoreFragment = false) {\n        if (uri1 === uri2) {\n            return 0;\n        }\n        return strCompare(this.getComparisonKey(uri1, ignoreFragment), this.getComparisonKey(uri2, ignoreFragment));\n    }\n    isEqual(uri1, uri2, ignoreFragment = false) {\n        if (uri1 === uri2) {\n            return true;\n        }\n        if (!uri1 || !uri2) {\n            return false;\n        }\n        return this.getComparisonKey(uri1, ignoreFragment) === this.getComparisonKey(uri2, ignoreFragment);\n    }\n    getComparisonKey(uri, ignoreFragment = false) {\n        return uri.with({\n            path: this._ignorePathCasing(uri) ? uri.path.toLowerCase() : undefined,\n            fragment: ignoreFragment ? null : undefined\n        }).toString();\n    }\n    isEqualOrParent(base, parentCandidate, ignoreFragment = false) {\n        if (base.scheme === parentCandidate.scheme) {\n            if (base.scheme === Schemas.file) {\n                return extpath.isEqualOrParent(originalFSPath(base), originalFSPath(parentCandidate), this._ignorePathCasing(base)) && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n            }\n            if (isEqualAuthority(base.authority, parentCandidate.authority)) {\n                return extpath.isEqualOrParent(base.path, parentCandidate.path, this._ignorePathCasing(base), '/') && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n            }\n        }\n        return false;\n    }\n    // --- path math\n    joinPath(resource, ...pathFragment) {\n        return URI.joinPath(resource, ...pathFragment);\n    }\n    basenameOrAuthority(resource) {\n        return basename(resource) || resource.authority;\n    }\n    basename(resource) {\n        return paths.posix.basename(resource.path);\n    }\n    extname(resource) {\n        return paths.posix.extname(resource.path);\n    }\n    dirname(resource) {\n        if (resource.path.length === 0) {\n            return resource;\n        }\n        let dirname;\n        if (resource.scheme === Schemas.file) {\n            dirname = URI.file(paths.dirname(originalFSPath(resource))).path;\n        }\n        else {\n            dirname = paths.posix.dirname(resource.path);\n            if (resource.authority && dirname.length && dirname.charCodeAt(0) !== 47 /* CharCode.Slash */) {\n                console.error(`dirname(\"${resource.toString})) resulted in a relative path`);\n                dirname = '/'; // If a URI contains an authority component, then the path component must either be empty or begin with a CharCode.Slash (\"/\") character\n            }\n        }\n        return resource.with({\n            path: dirname\n        });\n    }\n    normalizePath(resource) {\n        if (!resource.path.length) {\n            return resource;\n        }\n        let normalizedPath;\n        if (resource.scheme === Schemas.file) {\n            normalizedPath = URI.file(paths.normalize(originalFSPath(resource))).path;\n        }\n        else {\n            normalizedPath = paths.posix.normalize(resource.path);\n        }\n        return resource.with({\n            path: normalizedPath\n        });\n    }\n    relativePath(from, to) {\n        if (from.scheme !== to.scheme || !isEqualAuthority(from.authority, to.authority)) {\n            return undefined;\n        }\n        if (from.scheme === Schemas.file) {\n            const relativePath = paths.relative(originalFSPath(from), originalFSPath(to));\n            return isWindows ? extpath.toSlashes(relativePath) : relativePath;\n        }\n        let fromPath = from.path || '/';\n        const toPath = to.path || '/';\n        if (this._ignorePathCasing(from)) {\n            // make casing of fromPath match toPath\n            let i = 0;\n            for (const len = Math.min(fromPath.length, toPath.length); i < len; i++) {\n                if (fromPath.charCodeAt(i) !== toPath.charCodeAt(i)) {\n                    if (fromPath.charAt(i).toLowerCase() !== toPath.charAt(i).toLowerCase()) {\n                        break;\n                    }\n                }\n            }\n            fromPath = toPath.substr(0, i) + fromPath.substr(i);\n        }\n        return paths.posix.relative(fromPath, toPath);\n    }\n    resolvePath(base, path) {\n        if (base.scheme === Schemas.file) {\n            const newURI = URI.file(paths.resolve(originalFSPath(base), path));\n            return base.with({\n                authority: newURI.authority,\n                path: newURI.path\n            });\n        }\n        path = extpath.toPosixPath(path); // we allow path to be a windows path\n        return base.with({\n            path: paths.posix.resolve(base.path, path)\n        });\n    }\n    // --- misc\n    isAbsolutePath(resource) {\n        return !!resource.path && resource.path[0] === '/';\n    }\n    isEqualAuthority(a1, a2) {\n        return a1 === a2 || (a1 !== undefined && a2 !== undefined && equalsIgnoreCase(a1, a2));\n    }\n    hasTrailingPathSeparator(resource, sep = paths.sep) {\n        if (resource.scheme === Schemas.file) {\n            const fsp = originalFSPath(resource);\n            return fsp.length > extpath.getRoot(fsp).length && fsp[fsp.length - 1] === sep;\n        }\n        else {\n            const p = resource.path;\n            return (p.length > 1 && p.charCodeAt(p.length - 1) === 47 /* CharCode.Slash */) && !(/^[a-zA-Z]:(\\/$|\\\\$)/.test(resource.fsPath)); // ignore the slash at offset 0\n        }\n    }\n    removeTrailingPathSeparator(resource, sep = paths.sep) {\n        // Make sure that the path isn't a drive letter. A trailing separator there is not removable.\n        if (hasTrailingPathSeparator(resource, sep)) {\n            return resource.with({ path: resource.path.substr(0, resource.path.length - 1) });\n        }\n        return resource;\n    }\n    addTrailingPathSeparator(resource, sep = paths.sep) {\n        let isRootSep = false;\n        if (resource.scheme === Schemas.file) {\n            const fsp = originalFSPath(resource);\n            isRootSep = ((fsp !== undefined) && (fsp.length === extpath.getRoot(fsp).length) && (fsp[fsp.length - 1] === sep));\n        }\n        else {\n            sep = '/';\n            const p = resource.path;\n            isRootSep = p.length === 1 && p.charCodeAt(p.length - 1) === 47 /* CharCode.Slash */;\n        }\n        if (!isRootSep && !hasTrailingPathSeparator(resource, sep)) {\n            return resource.with({ path: resource.path + '/' });\n        }\n        return resource;\n    }\n}\n/**\n * Unbiased utility that takes uris \"as they are\". This means it can be interchanged with\n * uri#toString() usages. The following is true\n * ```\n * assertEqual(aUri.toString() === bUri.toString(), exturi.isEqual(aUri, bUri))\n * ```\n */\nexport const extUri = new ExtUri(() => false);\n/**\n * BIASED utility that _mostly_ ignored the case of urs paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriBiasedIgnorePathCase = new ExtUri(uri => {\n    // A file scheme resource is in the same platform as code, so ignore case for non linux platforms\n    // Resource can be from another platform. Lowering the case as an hack. Should come from File system provider\n    return uri.scheme === Schemas.file ? !isLinux : true;\n});\n/**\n * BIASED utility that always ignores the casing of uris paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriIgnorePathCase = new ExtUri(_ => true);\nexport const isEqual = extUri.isEqual.bind(extUri);\nexport const isEqualOrParent = extUri.isEqualOrParent.bind(extUri);\nexport const getComparisonKey = extUri.getComparisonKey.bind(extUri);\nexport const basenameOrAuthority = extUri.basenameOrAuthority.bind(extUri);\nexport const basename = extUri.basename.bind(extUri);\nexport const extname = extUri.extname.bind(extUri);\nexport const dirname = extUri.dirname.bind(extUri);\nexport const joinPath = extUri.joinPath.bind(extUri);\nexport const normalizePath = extUri.normalizePath.bind(extUri);\nexport const relativePath = extUri.relativePath.bind(extUri);\nexport const resolvePath = extUri.resolvePath.bind(extUri);\nexport const isAbsolutePath = extUri.isAbsolutePath.bind(extUri);\nexport const isEqualAuthority = extUri.isEqualAuthority.bind(extUri);\nexport const hasTrailingPathSeparator = extUri.hasTrailingPathSeparator.bind(extUri);\nexport const removeTrailingPathSeparator = extUri.removeTrailingPathSeparator.bind(extUri);\nexport const addTrailingPathSeparator = extUri.addTrailingPathSeparator.bind(extUri);\n/**\n * Data URI related helpers.\n */\nexport var DataUri;\n(function (DataUri) {\n    DataUri.META_DATA_LABEL = 'label';\n    DataUri.META_DATA_DESCRIPTION = 'description';\n    DataUri.META_DATA_SIZE = 'size';\n    DataUri.META_DATA_MIME = 'mime';\n    function parseMetaData(dataUri) {\n        const metadata = new Map();\n        // Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n        // the metadata is: size:2313;label:SomeLabel;description:SomeDescription\n        const meta = dataUri.path.substring(dataUri.path.indexOf(';') + 1, dataUri.path.lastIndexOf(';'));\n        meta.split(';').forEach(property => {\n            const [key, value] = property.split(':');\n            if (key && value) {\n                metadata.set(key, value);\n            }\n        });\n        // Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n        // the mime is: image/png\n        const mime = dataUri.path.substring(0, dataUri.path.indexOf(';'));\n        if (mime) {\n            metadata.set(DataUri.META_DATA_MIME, mime);\n        }\n        return metadata;\n    }\n    DataUri.parseMetaData = parseMetaData;\n})(DataUri || (DataUri = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../nls.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport { Extensions as ConfigurationExtensions } from '../../../platform/configuration/common/configurationRegistry.js';\n// Define extension point ids\nexport const Extensions = {\n    ModesRegistry: 'editor.modesRegistry'\n};\nexport class EditorModesRegistry {\n    constructor() {\n        this._onDidChangeLanguages = new Emitter();\n        this.onDidChangeLanguages = this._onDidChangeLanguages.event;\n        this._languages = [];\n    }\n    registerLanguage(def) {\n        this._languages.push(def);\n        this._onDidChangeLanguages.fire(undefined);\n        return {\n            dispose: () => {\n                for (let i = 0, len = this._languages.length; i < len; i++) {\n                    if (this._languages[i] === def) {\n                        this._languages.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    getLanguages() {\n        return this._languages;\n    }\n}\nexport const ModesRegistry = new EditorModesRegistry();\nRegistry.add(Extensions.ModesRegistry, ModesRegistry);\nexport const PLAINTEXT_LANGUAGE_ID = 'plaintext';\nexport const PLAINTEXT_EXTENSION = '.txt';\nModesRegistry.registerLanguage({\n    id: PLAINTEXT_LANGUAGE_ID,\n    extensions: [PLAINTEXT_EXTENSION],\n    aliases: [nls.localize('plainText.alias', \"Plain Text\"), 'text'],\n    mimetypes: [Mimes.text]\n});\nRegistry.as(ConfigurationExtensions.Configuration)\n    .registerDefaultConfigurations([{\n        overrides: {\n            '[plaintext]': {\n                'editor.unicodeHighlight.ambiguousCharacters': false,\n                'editor.unicodeHighlight.invisibleCharacters': false\n            }\n        }\n    }]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IConfigurationService = createDecorator('configurationService');\nexport function toValuesTree(properties, conflictReporter) {\n    const root = Object.create(null);\n    for (const key in properties) {\n        addToValueTree(root, key, properties[key], conflictReporter);\n    }\n    return root;\n}\nexport function addToValueTree(settingsTreeRoot, key, value, conflictReporter) {\n    const segments = key.split('.');\n    const last = segments.pop();\n    let curr = settingsTreeRoot;\n    for (let i = 0; i < segments.length; i++) {\n        const s = segments[i];\n        let obj = curr[s];\n        switch (typeof obj) {\n            case 'undefined':\n                obj = curr[s] = Object.create(null);\n                break;\n            case 'object':\n                if (obj === null) {\n                    conflictReporter(`Ignoring ${key} as ${segments.slice(0, i + 1).join('.')} is null`);\n                    return;\n                }\n                break;\n            default:\n                conflictReporter(`Ignoring ${key} as ${segments.slice(0, i + 1).join('.')} is ${JSON.stringify(obj)}`);\n                return;\n        }\n        curr = obj;\n    }\n    if (typeof curr === 'object' && curr !== null) {\n        try {\n            curr[last] = value; // workaround https://github.com/microsoft/vscode/issues/13606\n        }\n        catch (e) {\n            conflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n        }\n    }\n    else {\n        conflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n    }\n}\nexport function removeFromValueTree(valueTree, key) {\n    const segments = key.split('.');\n    doRemoveFromValueTree(valueTree, segments);\n}\nfunction doRemoveFromValueTree(valueTree, segments) {\n    const first = segments.shift();\n    if (segments.length === 0) {\n        // Reached last segment\n        delete valueTree[first];\n        return;\n    }\n    if (Object.keys(valueTree).indexOf(first) !== -1) {\n        const value = valueTree[first];\n        if (typeof value === 'object' && !Array.isArray(value)) {\n            doRemoveFromValueTree(value, segments);\n            if (Object.keys(value).length === 0) {\n                delete valueTree[first];\n            }\n        }\n    }\n}\n/**\n * A helper function to get the configuration value with a specific settings path (e.g. config.some.setting)\n */\nexport function getConfigurationValue(config, settingPath, defaultValue) {\n    function accessSetting(config, path) {\n        let current = config;\n        for (const component of path) {\n            if (typeof current !== 'object' || current === null) {\n                return undefined;\n            }\n            current = current[component];\n        }\n        return current;\n    }\n    const path = settingPath.split('.');\n    const result = accessSetting(config, path);\n    return typeof result === 'undefined' ? defaultValue : result;\n}\nexport function getLanguageTagSettingPlainKey(settingKey) {\n    return settingKey.replace(/[\\[\\]]/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { distinct } from '../../../base/common/arrays.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport * as types from '../../../base/common/types.js';\nimport * as nls from '../../../nls.js';\nimport { getLanguageTagSettingPlainKey } from './configuration.js';\nimport { Extensions as JSONExtensions } from '../../jsonschemas/common/jsonContributionRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nexport const Extensions = {\n    Configuration: 'base.contributions.configuration'\n};\nexport const allSettings = { properties: {}, patternProperties: {} };\nexport const applicationSettings = { properties: {}, patternProperties: {} };\nexport const machineSettings = { properties: {}, patternProperties: {} };\nexport const machineOverridableSettings = { properties: {}, patternProperties: {} };\nexport const windowSettings = { properties: {}, patternProperties: {} };\nexport const resourceSettings = { properties: {}, patternProperties: {} };\nexport const resourceLanguageSettingsSchemaId = 'vscode://schemas/settings/resourceLanguage';\nconst contributionRegistry = Registry.as(JSONExtensions.JSONContribution);\nclass ConfigurationRegistry {\n    constructor() {\n        this.registeredConfigurationDefaults = [];\n        this.overrideIdentifiers = new Set();\n        this._onDidSchemaChange = new Emitter();\n        this._onDidUpdateConfiguration = new Emitter();\n        this.configurationDefaultsOverrides = new Map();\n        this.defaultLanguageConfigurationOverridesNode = {\n            id: 'defaultOverrides',\n            title: nls.localize('defaultLanguageConfigurationOverrides.title', \"Default Language Configuration Overrides\"),\n            properties: {}\n        };\n        this.configurationContributors = [this.defaultLanguageConfigurationOverridesNode];\n        this.resourceLanguageSettingsSchema = {\n            properties: {},\n            patternProperties: {},\n            additionalProperties: true,\n            allowTrailingCommas: true,\n            allowComments: true\n        };\n        this.configurationProperties = {};\n        this.policyConfigurations = new Map();\n        this.excludedConfigurationProperties = {};\n        contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n        this.registerOverridePropertyPatternKey();\n    }\n    registerConfiguration(configuration, validate = true) {\n        this.registerConfigurations([configuration], validate);\n    }\n    registerConfigurations(configurations, validate = true) {\n        const properties = new Set();\n        this.doRegisterConfigurations(configurations, validate, properties);\n        contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n        this._onDidSchemaChange.fire();\n        this._onDidUpdateConfiguration.fire({ properties });\n    }\n    registerDefaultConfigurations(configurationDefaults) {\n        const properties = new Set();\n        this.doRegisterDefaultConfigurations(configurationDefaults, properties);\n        this._onDidSchemaChange.fire();\n        this._onDidUpdateConfiguration.fire({ properties, defaultsOverrides: true });\n    }\n    doRegisterDefaultConfigurations(configurationDefaults, bucket) {\n        this.registeredConfigurationDefaults.push(...configurationDefaults);\n        const overrideIdentifiers = [];\n        for (const { overrides, source } of configurationDefaults) {\n            for (const key in overrides) {\n                bucket.add(key);\n                const configurationDefaultOverridesForKey = this.configurationDefaultsOverrides.get(key)\n                    ?? this.configurationDefaultsOverrides.set(key, { configurationDefaultOverrides: [] }).get(key);\n                const value = overrides[key];\n                configurationDefaultOverridesForKey.configurationDefaultOverrides.push({ value, source });\n                // Configuration defaults for Override Identifiers\n                if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                    const newDefaultOverride = this.mergeDefaultConfigurationsForOverrideIdentifier(key, value, source, configurationDefaultOverridesForKey.configurationDefaultOverrideValue);\n                    if (!newDefaultOverride) {\n                        continue;\n                    }\n                    configurationDefaultOverridesForKey.configurationDefaultOverrideValue = newDefaultOverride;\n                    this.updateDefaultOverrideProperty(key, newDefaultOverride, source);\n                    overrideIdentifiers.push(...overrideIdentifiersFromKey(key));\n                }\n                // Configuration defaults for Configuration Properties\n                else {\n                    const newDefaultOverride = this.mergeDefaultConfigurationsForConfigurationProperty(key, value, source, configurationDefaultOverridesForKey.configurationDefaultOverrideValue);\n                    if (!newDefaultOverride) {\n                        continue;\n                    }\n                    configurationDefaultOverridesForKey.configurationDefaultOverrideValue = newDefaultOverride;\n                    const property = this.configurationProperties[key];\n                    if (property) {\n                        this.updatePropertyDefaultValue(key, property);\n                        this.updateSchema(key, property);\n                    }\n                }\n            }\n        }\n        this.doRegisterOverrideIdentifiers(overrideIdentifiers);\n    }\n    updateDefaultOverrideProperty(key, newDefaultOverride, source) {\n        const property = {\n            type: 'object',\n            default: newDefaultOverride.value,\n            description: nls.localize('defaultLanguageConfiguration.description', \"Configure settings to be overridden for the {0} language.\", getLanguageTagSettingPlainKey(key)),\n            $ref: resourceLanguageSettingsSchemaId,\n            defaultDefaultValue: newDefaultOverride.value,\n            source,\n            defaultValueSource: source\n        };\n        this.configurationProperties[key] = property;\n        this.defaultLanguageConfigurationOverridesNode.properties[key] = property;\n    }\n    mergeDefaultConfigurationsForOverrideIdentifier(overrideIdentifier, configurationValueObject, valueSource, existingDefaultOverride) {\n        const defaultValue = existingDefaultOverride?.value || {};\n        const source = existingDefaultOverride?.source ?? new Map();\n        // This should not happen\n        if (!(source instanceof Map)) {\n            console.error('objectConfigurationSources is not a Map');\n            return undefined;\n        }\n        for (const propertyKey of Object.keys(configurationValueObject)) {\n            const propertyDefaultValue = configurationValueObject[propertyKey];\n            const isObjectSetting = types.isObject(propertyDefaultValue) &&\n                (types.isUndefined(defaultValue[propertyKey]) || types.isObject(defaultValue[propertyKey]));\n            // If the default value is an object, merge the objects and store the source of each keys\n            if (isObjectSetting) {\n                defaultValue[propertyKey] = { ...(defaultValue[propertyKey] ?? {}), ...propertyDefaultValue };\n                // Track the source of each value in the object\n                if (valueSource) {\n                    for (const objectKey in propertyDefaultValue) {\n                        source.set(`${propertyKey}.${objectKey}`, valueSource);\n                    }\n                }\n            }\n            // Primitive values are overridden\n            else {\n                defaultValue[propertyKey] = propertyDefaultValue;\n                if (valueSource) {\n                    source.set(propertyKey, valueSource);\n                }\n                else {\n                    source.delete(propertyKey);\n                }\n            }\n        }\n        return { value: defaultValue, source };\n    }\n    mergeDefaultConfigurationsForConfigurationProperty(propertyKey, value, valuesSource, existingDefaultOverride) {\n        const property = this.configurationProperties[propertyKey];\n        const existingDefaultValue = existingDefaultOverride?.value ?? property?.defaultDefaultValue;\n        let source = valuesSource;\n        const isObjectSetting = types.isObject(value) &&\n            (property !== undefined && property.type === 'object' ||\n                property === undefined && (types.isUndefined(existingDefaultValue) || types.isObject(existingDefaultValue)));\n        // If the default value is an object, merge the objects and store the source of each keys\n        if (isObjectSetting) {\n            source = existingDefaultOverride?.source ?? new Map();\n            // This should not happen\n            if (!(source instanceof Map)) {\n                console.error('defaultValueSource is not a Map');\n                return undefined;\n            }\n            for (const objectKey in value) {\n                if (valuesSource) {\n                    source.set(`${propertyKey}.${objectKey}`, valuesSource);\n                }\n            }\n            value = { ...(types.isObject(existingDefaultValue) ? existingDefaultValue : {}), ...value };\n        }\n        return { value, source };\n    }\n    registerOverrideIdentifiers(overrideIdentifiers) {\n        this.doRegisterOverrideIdentifiers(overrideIdentifiers);\n        this._onDidSchemaChange.fire();\n    }\n    doRegisterOverrideIdentifiers(overrideIdentifiers) {\n        for (const overrideIdentifier of overrideIdentifiers) {\n            this.overrideIdentifiers.add(overrideIdentifier);\n        }\n        this.updateOverridePropertyPatternKey();\n    }\n    doRegisterConfigurations(configurations, validate, bucket) {\n        configurations.forEach(configuration => {\n            this.validateAndRegisterProperties(configuration, validate, configuration.extensionInfo, configuration.restrictedProperties, undefined, bucket);\n            this.configurationContributors.push(configuration);\n            this.registerJSONConfiguration(configuration);\n        });\n    }\n    validateAndRegisterProperties(configuration, validate = true, extensionInfo, restrictedProperties, scope = 3 /* ConfigurationScope.WINDOW */, bucket) {\n        scope = types.isUndefinedOrNull(configuration.scope) ? scope : configuration.scope;\n        const properties = configuration.properties;\n        if (properties) {\n            for (const key in properties) {\n                const property = properties[key];\n                if (validate && validateProperty(key, property)) {\n                    delete properties[key];\n                    continue;\n                }\n                property.source = extensionInfo;\n                // update default value\n                property.defaultDefaultValue = properties[key].default;\n                this.updatePropertyDefaultValue(key, property);\n                // update scope\n                if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                    property.scope = undefined; // No scope for overridable properties `[${identifier}]`\n                }\n                else {\n                    property.scope = types.isUndefinedOrNull(property.scope) ? scope : property.scope;\n                    property.restricted = types.isUndefinedOrNull(property.restricted) ? !!restrictedProperties?.includes(key) : property.restricted;\n                }\n                // Add to properties maps\n                // Property is included by default if 'included' is unspecified\n                if (properties[key].hasOwnProperty('included') && !properties[key].included) {\n                    this.excludedConfigurationProperties[key] = properties[key];\n                    delete properties[key];\n                    continue;\n                }\n                else {\n                    this.configurationProperties[key] = properties[key];\n                    if (properties[key].policy?.name) {\n                        this.policyConfigurations.set(properties[key].policy.name, key);\n                    }\n                }\n                if (!properties[key].deprecationMessage && properties[key].markdownDeprecationMessage) {\n                    // If not set, default deprecationMessage to the markdown source\n                    properties[key].deprecationMessage = properties[key].markdownDeprecationMessage;\n                }\n                bucket.add(key);\n            }\n        }\n        const subNodes = configuration.allOf;\n        if (subNodes) {\n            for (const node of subNodes) {\n                this.validateAndRegisterProperties(node, validate, extensionInfo, restrictedProperties, scope, bucket);\n            }\n        }\n    }\n    getConfigurationProperties() {\n        return this.configurationProperties;\n    }\n    getPolicyConfigurations() {\n        return this.policyConfigurations;\n    }\n    registerJSONConfiguration(configuration) {\n        const register = (configuration) => {\n            const properties = configuration.properties;\n            if (properties) {\n                for (const key in properties) {\n                    this.updateSchema(key, properties[key]);\n                }\n            }\n            const subNodes = configuration.allOf;\n            subNodes?.forEach(register);\n        };\n        register(configuration);\n    }\n    updateSchema(key, property) {\n        allSettings.properties[key] = property;\n        switch (property.scope) {\n            case 1 /* ConfigurationScope.APPLICATION */:\n                applicationSettings.properties[key] = property;\n                break;\n            case 2 /* ConfigurationScope.MACHINE */:\n                machineSettings.properties[key] = property;\n                break;\n            case 6 /* ConfigurationScope.MACHINE_OVERRIDABLE */:\n                machineOverridableSettings.properties[key] = property;\n                break;\n            case 3 /* ConfigurationScope.WINDOW */:\n                windowSettings.properties[key] = property;\n                break;\n            case 4 /* ConfigurationScope.RESOURCE */:\n                resourceSettings.properties[key] = property;\n                break;\n            case 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */:\n                resourceSettings.properties[key] = property;\n                this.resourceLanguageSettingsSchema.properties[key] = property;\n                break;\n        }\n    }\n    updateOverridePropertyPatternKey() {\n        for (const overrideIdentifier of this.overrideIdentifiers.values()) {\n            const overrideIdentifierProperty = `[${overrideIdentifier}]`;\n            const resourceLanguagePropertiesSchema = {\n                type: 'object',\n                description: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n                errorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n                $ref: resourceLanguageSettingsSchemaId,\n            };\n            this.updatePropertyDefaultValue(overrideIdentifierProperty, resourceLanguagePropertiesSchema);\n            allSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            applicationSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            machineSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            machineOverridableSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            windowSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            resourceSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n        }\n    }\n    registerOverridePropertyPatternKey() {\n        const resourceLanguagePropertiesSchema = {\n            type: 'object',\n            description: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n            errorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n            $ref: resourceLanguageSettingsSchemaId,\n        };\n        allSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        applicationSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        machineSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        machineOverridableSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        windowSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        resourceSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        this._onDidSchemaChange.fire();\n    }\n    updatePropertyDefaultValue(key, property) {\n        const configurationdefaultOverride = this.configurationDefaultsOverrides.get(key)?.configurationDefaultOverrideValue;\n        let defaultValue = undefined;\n        let defaultSource = undefined;\n        if (configurationdefaultOverride\n            && (!property.disallowConfigurationDefault || !configurationdefaultOverride.source) // Prevent overriding the default value if the property is disallowed to be overridden by configuration defaults from extensions\n        ) {\n            defaultValue = configurationdefaultOverride.value;\n            defaultSource = configurationdefaultOverride.source;\n        }\n        if (types.isUndefined(defaultValue)) {\n            defaultValue = property.defaultDefaultValue;\n            defaultSource = undefined;\n        }\n        if (types.isUndefined(defaultValue)) {\n            defaultValue = getDefaultValue(property.type);\n        }\n        property.default = defaultValue;\n        property.defaultValueSource = defaultSource;\n    }\n}\nconst OVERRIDE_IDENTIFIER_PATTERN = `\\\\[([^\\\\]]+)\\\\]`;\nconst OVERRIDE_IDENTIFIER_REGEX = new RegExp(OVERRIDE_IDENTIFIER_PATTERN, 'g');\nexport const OVERRIDE_PROPERTY_PATTERN = `^(${OVERRIDE_IDENTIFIER_PATTERN})+$`;\nexport const OVERRIDE_PROPERTY_REGEX = new RegExp(OVERRIDE_PROPERTY_PATTERN);\nexport function overrideIdentifiersFromKey(key) {\n    const identifiers = [];\n    if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n        let matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n        while (matches?.length) {\n            const identifier = matches[1].trim();\n            if (identifier) {\n                identifiers.push(identifier);\n            }\n            matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n        }\n    }\n    return distinct(identifiers);\n}\nexport function getDefaultValue(type) {\n    const t = Array.isArray(type) ? type[0] : type;\n    switch (t) {\n        case 'boolean':\n            return false;\n        case 'integer':\n        case 'number':\n            return 0;\n        case 'string':\n            return '';\n        case 'array':\n            return [];\n        case 'object':\n            return {};\n        default:\n            return null;\n    }\n}\nconst configurationRegistry = new ConfigurationRegistry();\nRegistry.add(Extensions.Configuration, configurationRegistry);\nexport function validateProperty(property, schema) {\n    if (!property.trim()) {\n        return nls.localize('config.property.empty', \"Cannot register an empty property\");\n    }\n    if (OVERRIDE_PROPERTY_REGEX.test(property)) {\n        return nls.localize('config.property.languageDefault', \"Cannot register '{0}'. This matches property pattern '\\\\\\\\[.*\\\\\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.\", property);\n    }\n    if (configurationRegistry.getConfigurationProperties()[property] !== undefined) {\n        return nls.localize('config.property.duplicate', \"Cannot register '{0}'. This property is already registered.\", property);\n    }\n    if (schema.policy?.name && configurationRegistry.getPolicyConfigurations().get(schema.policy?.name) !== undefined) {\n        return nls.localize('config.policy.duplicate', \"Cannot register '{0}'. The associated policy {1} is already registered with {2}.\", property, schema.policy?.name, configurationRegistry.getPolicyConfigurations().get(schema.policy?.name));\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// ------ internal util\nexport var _util;\n(function (_util) {\n    _util.serviceIds = new Map();\n    _util.DI_TARGET = '$di$target';\n    _util.DI_DEPENDENCIES = '$di$dependencies';\n    function getServiceDependencies(ctor) {\n        return ctor[_util.DI_DEPENDENCIES] || [];\n    }\n    _util.getServiceDependencies = getServiceDependencies;\n})(_util || (_util = {}));\nexport const IInstantiationService = createDecorator('instantiationService');\nfunction storeServiceDependency(id, target, index) {\n    if (target[_util.DI_TARGET] === target) {\n        target[_util.DI_DEPENDENCIES].push({ id, index });\n    }\n    else {\n        target[_util.DI_DEPENDENCIES] = [{ id, index }];\n        target[_util.DI_TARGET] = target;\n    }\n}\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator(serviceId) {\n    if (_util.serviceIds.has(serviceId)) {\n        return _util.serviceIds.get(serviceId);\n    }\n    const id = function (target, key, index) {\n        if (arguments.length !== 3) {\n            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n        }\n        storeServiceDependency(id, target, index);\n    };\n    id.toString = () => serviceId;\n    _util.serviceIds.set(serviceId, id);\n    return id;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport * as platform from '../../registry/common/platform.js';\nexport const Extensions = {\n    JSONContribution: 'base.contributions.json'\n};\nfunction normalizeId(id) {\n    if (id.length > 0 && id.charAt(id.length - 1) === '#') {\n        return id.substring(0, id.length - 1);\n    }\n    return id;\n}\nclass JSONContributionRegistry {\n    constructor() {\n        this._onDidChangeSchema = new Emitter();\n        this.schemasById = {};\n    }\n    registerSchema(uri, unresolvedSchemaContent) {\n        this.schemasById[normalizeId(uri)] = unresolvedSchemaContent;\n        this._onDidChangeSchema.fire(uri);\n    }\n    notifySchemaChanged(uri) {\n        this._onDidChangeSchema.fire(uri);\n    }\n}\nconst jsonContributionRegistry = new JSONContributionRegistry();\nplatform.Registry.add(Extensions.JSONContribution, jsonContributionRegistry);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Assert from '../../../base/common/assert.js';\nimport * as Types from '../../../base/common/types.js';\nclass RegistryImpl {\n    constructor() {\n        this.data = new Map();\n    }\n    add(id, data) {\n        Assert.ok(Types.isString(id));\n        Assert.ok(Types.isObject(data));\n        Assert.ok(!this.data.has(id), 'There is already an extension with this id');\n        this.data.set(id, data);\n    }\n    as(id) {\n        return this.data.get(id) || null;\n    }\n}\nexport const Registry = new RegistryImpl();\n"],"names":["isPathSeparator","code","toSlashes","osPath","toPosixPath","getRoot","path","sep","len","firstLetter","pos","start","isWindowsDriveLetter","isEqualOrParent","base","parentCandidate","ignoreCase","separator","sepOffset","char0","hasDriveLetter","isWindowsOS","Mimes","Object","DataUri","originalFSPath","uri","ExtUri","_ignorePathCasing","uri1","uri2","ignoreFragment","undefined","isEqualAuthority","resource","pathFragment","basename","dirname","console","normalizedPath","from","to","relativePath","fromPath","toPath","i","Math","newURI","a1","a2","fsp","p","hasTrailingPathSeparator","isRootSep","extUri","_","isEqual","basenameOrAuthority","extname","joinPath","normalizePath","resolvePath","dataUri","metadata","Map","meta","property","key","value","mime","ModesRegistry","def","PLAINTEXT_LANGUAGE_ID","IConfigurationService","toValuesTree","properties","conflictReporter","root","addToValueTree","settingsTreeRoot","segments","last","curr","s","obj","JSON","e","removeFromValueTree","valueTree","doRemoveFromValueTree","first","Array","getConfigurationValue","config","settingPath","defaultValue","result","accessSetting","current","component","getLanguageTagSettingPlainKey","settingKey","Extensions","allSettings","applicationSettings","machineSettings","machineOverridableSettings","windowSettings","resourceSettings","resourceLanguageSettingsSchemaId","contributionRegistry","OVERRIDE_IDENTIFIER_PATTERN","OVERRIDE_IDENTIFIER_REGEX","RegExp","OVERRIDE_PROPERTY_PATTERN","OVERRIDE_PROPERTY_REGEX","overrideIdentifiersFromKey","identifiers","matches","identifier","configurationRegistry","Set","configuration","validate","configurations","configurationDefaults","bucket","overrideIdentifiers","overrides","source","configurationDefaultOverridesForKey","newDefaultOverride","overrideIdentifier","configurationValueObject","valueSource","existingDefaultOverride","propertyKey","propertyDefaultValue","objectKey","valuesSource","existingDefaultValue","extensionInfo","restrictedProperties","scope","schema","subNodes","node","register","overrideIdentifierProperty","resourceLanguagePropertiesSchema","defaultSource","configurationdefaultOverride","getDefaultValue","type","_util","ctor","IInstantiationService","createDecorator","serviceId","id","target","index","arguments","Error","jsonContributionRegistry","unresolvedSchemaContent","Registry","data"],"mappings":"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"}